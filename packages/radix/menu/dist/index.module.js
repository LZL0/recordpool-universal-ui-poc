import{useFocusGuards as e}from"@radix-ui/react-focus-guards";import{useCallbackRef as t}from"@radix-ui/react-use-callback-ref";import{Slot as r}from"@radix-ui/react-slot";import{RovingFocusGroup as n,RovingFocusItem as o}from"@radix-ui/react-roving-focus";import{Portal as a}from"@radix-ui/react-portal";import*as u from"@radix-ui/react-popper";import{Primitive as c,extendPrimitive as i}from"@radix-ui/react-primitive";import{Presence as s}from"@radix-ui/react-presence";import{FocusScope as l}from"@radix-ui/react-focus-scope";import{DismissableLayer as m}from"@radix-ui/react-dismissable-layer";import{createContext as d}from"@radix-ui/react-context";import{useComposedRefs as p}from"@radix-ui/react-compose-refs";import{createCollection as f}from"@radix-ui/react-collection";import{composeEventHandlers as v}from"@radix-ui/primitive";import{hideOthers as x}from"aria-hidden";import{RemoveScroll as M}from"react-remove-scroll";import{Platform as h,View as E}from"react-native";import*as w from"react";import y from"@babel/runtime/helpers/esm/extends";function C(){const e=w.useRef(0),t=w.useRef(""),r=w.useCallback((n=>{t.current=n,window.clearTimeout(e.current),e.current=window.setTimeout((()=>r("")),1e3)}),[]);return{onKeyDownCapture:e=>{if(1===e.key.length&&!(e.ctrlKey||e.altKey||e.metaKey)){const n=e.currentTarget;r(t.current+e.key)," "!==e.key||t.current.startsWith(" ")||e.stopPropagation();const o=document.activeElement,a=o?b(o):void 0,u=function(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,o=r?e.indexOf(r):-1;let a=(u=e,c=Math.max(o,0),u.map(((e,t)=>u[(c+t)%u.length])));var u,c;1===n.length&&(a=a.filter((e=>e!==r)));const i=a.find((e=>e.toLowerCase().startsWith(n.toLowerCase())));return i!==r?i:void 0}(Array.from(n.querySelectorAll(`[${g}]`)).map(b),t.current,a),c=n.querySelector(`[${g}="${u}"]`);c&&setTimeout((()=>c.focus()))}}}}const b=e=>{var t;return null!==(t=e.getAttribute(g))&&void 0!==t?t:""},g="data-radix-menu-typeahead-item";const I=["ArrowUp","PageDown","End"],k=["ArrowDown","PageUp","Home",...I],[D,S]=d("Menu");export const Menu=e=>{const{open:r=!1,children:n,onOpenChange:o}=e,a=t(o);/*#__PURE__*/return w.createElement(u.Root,null,/*#__PURE__*/w.createElement(D,{open:r,onOpenChange:a},n))};/*#__PURE__*/const[A,R,P]=f(),[O,F]=d("MenuContent");export const MenuContent=/*#__PURE__*/w.forwardRef(((e,t)=>{const{forceMount:r,...n}=e,o=S("MenuContent");/*#__PURE__*/return w.createElement(s,{present:r||o.open},/*#__PURE__*/w.createElement(A,null,/*#__PURE__*/w.createElement(K,y({"data-state":(a=o.open,a?"open":"closed")},n,{ref:t}))));var a}));const K=/*#__PURE__*/w.forwardRef(((t,o)=>{const{dir:c="ltr",loop:i=!1,trapFocus:s,onOpenAutoFocus:d,onCloseAutoFocus:f,disableOutsidePointerEvents:h,onEscapeKeyDown:E,onPointerDownOutside:b,onFocusOutside:g,onInteractOutside:D,disableOutsideScroll:A,portalled:R,...F}=t,K=S("MenuContent"),L=C(),{getItems:G}=P(),[T,V]=w.useState(null),[N,U]=w.useState(!1),$=w.useRef(null),q=p(o,$),W=R?a:w.Fragment,z=A?M:w.Fragment;return e(),w.useEffect((()=>{const e=$.current;if(e)return x(e)}),[]),/*#__PURE__*/w.createElement(W,null,/*#__PURE__*/w.createElement(z,null,/*#__PURE__*/w.createElement(O,{onItemLeave:w.useCallback((()=>{var e;null===(e=$.current)||void 0===e||e.focus(),V(null)}),[])},/*#__PURE__*/w.createElement(l,{as:r,trapped:s&&K.open,onMountAutoFocus:d,onUnmountAutoFocus:e=>{N?e.preventDefault():null==f||f(e)}},/*#__PURE__*/w.createElement(m,{as:r,disableOutsidePointerEvents:h,onEscapeKeyDown:v(E,(()=>{U(!1)})),onPointerDownOutside:v(b,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!1===t.ctrlKey;U(!h&&r)}),{checkForDefaultPrevented:!1}),onFocusOutside:v(g,(e=>{s&&e.preventDefault()}),{checkForDefaultPrevented:!1}),onInteractOutside:D,onDismiss:()=>K.onOpenChange(!1)},/*#__PURE__*/w.createElement(n,{as:r,dir:c,orientation:"vertical",loop:i,currentTabStopId:T,onCurrentTabStopIdChange:V,onEntryFocus:e=>e.preventDefault()},/*#__PURE__*/w.createElement(u.Content,y({role:"menu"},F,{ref:q,style:{outline:"none",...F.style},onKeyDownCapture:v(F.onKeyDownCapture,L.onKeyDownCapture),onKeyDown:v(F.onKeyDown,(e=>{const t=$.current;if(e.target!==t)return;if(!k.includes(e.key))return;e.preventDefault();const r=G().filter((e=>!e.disabled)).map((e=>e.ref.current));I.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(r)}))}))))))))})),L="div";/*#__PURE__*/export const MenuItem=/*#__PURE__*/w.forwardRef(((e,t)=>{const{as:r=L,disabled:n=!1,textValue:a,onSelect:u,...c}=e,i=w.useRef(null),s=p(t,i),l=S("MenuItem"),m=F("MenuItem"),[d,f]=w.useState("");w.useEffect((()=>{const e=i.current;var t;e&&f((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}),[c.children]);const x=function({textValue:e,disabled:t}){return{[g]:t?void 0:e}}({textValue:null!=a?a:d,disabled:n}),M=()=>{const e=i.current;if(!n&&e){var t;const r=new Event("menu.itemSelect",{bubbles:!0,cancelable:!0});if(e.dispatchEvent(r),r.defaultPrevented)return;null===(t=l.onOpenChange)||void 0===t||t.call(l,!1)}};return w.useEffect((()=>{const e=i.current;if(e){const t=e=>null==u?void 0:u(e);return e.addEventListener("menu.itemSelect",t),()=>e.removeEventListener("menu.itemSelect",t)}}),[u]),/*#__PURE__*/w.createElement(R,{disabled:n},/*#__PURE__*/w.createElement(o,y({role:"menuitem","aria-disabled":n||void 0,focusable:!n},c,x,{as:r,ref:s,"data-disabled":n?"":void 0,onKeyDown:v(e.onKeyDown,(e=>{n||"Enter"!==e.key&&" "!==e.key||(" "===e.key&&e.preventDefault(),M())})),onMouseUp:v(e.onMouseUp,M),onMouseMove:v(e.onMouseMove,(e=>{if(n)m.onItemLeave();else{e.currentTarget.focus()}})),onMouseLeave:v(e.onMouseLeave,(()=>m.onItemLeave()))})))}));/*#__PURE__*/const G=/*#__PURE__*/w.forwardRef(((e,t)=>{const{...r}=e;/*#__PURE__*/return w.createElement(E,y({},r,{ref:t}))}));/*#__PURE__*/export const MenuCheckboxItem=/*#__PURE__*/w.forwardRef(((e,t)=>{const{checked:r=!1,onCheckedChange:n,...o}=e;/*#__PURE__*/return w.createElement(N.Provider,{value:r},/*#__PURE__*/w.createElement(MenuItem,y({role:"menuitemcheckbox","aria-checked":r},o,{ref:t,"data-state":U(r),onSelect:v(o.onSelect,(()=>null==n?void 0:n(!r)),{checkForDefaultPrevented:!1})})))}));/*#__PURE__*/const T=/*#__PURE__*/w.createContext({});export const MenuRadioGroup=/*#__PURE__*/w.forwardRef(((e,r)=>{const{value:n,onValueChange:o,...a}=e,u=t(o),c=w.useMemo((()=>({value:n,onValueChange:u})),[n,u]);/*#__PURE__*/return w.createElement(T.Provider,{value:c},/*#__PURE__*/w.createElement(MenuGroup,y({},a,{ref:r})))}));/*#__PURE__*/export const MenuRadioItem=/*#__PURE__*/w.forwardRef(((e,t)=>{const{value:r,...n}=e,o=w.useContext(T),a=r===o.value;/*#__PURE__*/return w.createElement(N.Provider,{value:a},/*#__PURE__*/w.createElement(MenuItem,y({role:"menuitemradio","aria-checked":a},n,{ref:t,"data-state":U(a),onSelect:v(n.onSelect,(()=>{var e;return null===(e=o.onValueChange)||void 0===e?void 0:e.call(o,r)}),{checkForDefaultPrevented:!1})})))}));/*#__PURE__*/const V="span",N=/*#__PURE__*/w.createContext(!1);export const MenuItemIndicator=/*#__PURE__*/w.forwardRef(((e,t)=>{const{as:r=V,forceMount:n,...o}=e,a=w.useContext(N);/*#__PURE__*/return w.createElement(s,{present:n||a},/*#__PURE__*/w.createElement(c,y({},o,{as:r,ref:t,"data-state":U(a)})))}));/*#__PURE__*/export const MenuAnchor=i(u.Anchor,{displayName:"MenuAnchor"});export const MenuGroup=i(c,{defaultProps:{role:"group"},displayName:"MenuGroup"});export const MenuLabel=i(c,{displayName:"MenuLabel"});export const MenuSeparator=i(c,{defaultProps:{role:"separator","aria-orientation":"horizontal"},displayName:"MenuSeparator "});export const MenuArrow=i(u.Arrow,{displayName:"MenuArrow"});function U(e){return e?"checked":"unchecked"}export const Root=Menu;export const Anchor=MenuAnchor;export const Content=MenuContent;export const Group=MenuGroup;export const Label=MenuLabel;export const Item="web"===h.OS?MenuItem:G;export const CheckboxItem=MenuCheckboxItem;export const RadioGroup=MenuRadioGroup;export const RadioItem=MenuRadioItem;export const ItemIndicator=MenuItemIndicator;export const Separator=MenuSeparator;export const Arrow=MenuArrow;
//# sourceMappingURL=index.module.js.map
